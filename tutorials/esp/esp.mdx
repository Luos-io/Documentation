---
custom_edit_url: null
title: 'Luos with ESP32: ESP IDF and Espressif IDE Setup'
hide_title: true
---

import Image from '@site/src/components/Image';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

import Introduction from '@site/src/components/school/article/intro.js';

<Introduction
  title="Luos with ESP32: ESP IDF and Espressif IDE Setup"
  time="1 hour"
  level="Confirmed"
  category="Tutorial"
  desc="You want to use Luos engine and the advantage of a Luos network with an ESP32 MCU. In this tutorial, you will learn how to use a simple button package with the ESP32 Family."
  tags={['Service', 'Package', 'ESP32']}
/>

# Part 1: Environment

## 1. Introduction

In this tutorial, we will learn how to perform the following essential actions:

1. Configure the embedded environment on Espressif IDE.
2. Flash a button service, create a Luos network and detect your service.

<div align="center">
  <Image
    src="https://media.giphy.com/media/3o7btNa0RUYa5E7iiQ/giphy.gif"
    className="gif_tutorial"
    alt="gif_boom"
  />
</div>

## 2. Set up your environment

The only two things you will need for now are an ESP32 development board and a USB cable.

:::caution
Remember that Luos only covers the ESP32 series, ESP32-S2, ESP32-S3 and ESP32-C3 series.
:::

Plug the USB cable into the USB port of the board and to a computer, then clone or download the [Luos engine repository](https://github.com/Luos-io/luos_engine).

And here we go!

### Espressif IDE (only for Windows users)

1. From the Espressif website, download the latest version of [espressif IDE](https://dl.espressif.com/dl/esp-idf/) and follow [the installation instructions.](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/windows-setup.html)

2. Start Espressif IDE:

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-1.png" />
</div>

3. Import the project in your IDE:

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-2.png" />
</div>

4. From the Luos engine folder you just cloned or downloaded, navigate to the folder _../examples/projects/ESP32/button_. Import your project.
   Click on **Finish**.

5. Your project is now added in the IDE:
   1. Select the target you want to build.
   2. Click on the hammer to build your project.
   3. At the end of building your project, the folders _build_ and _esp_id_component_ are created.
   4. A file called _sdkconfig_ appears, containing the default configuration for our target.

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-3.png" />
</div>

6. Modify the file _sdkconfig_. By default, Usart Iram functions are not declared in the RAM. You must configure them in the RAM.

Find the line `#CONFIG_UART_ISR_IN_IRAM is not set` and replace it with the line `CONFIG_UART_ISR_IN_IRAM=y`

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-4.png" height="300px" />
  <Image src="/assets/images/tutorials/esp/esp-1-5.png" height="300px" />
</div>

7. Now that you have placed all the necessary parts of the code in the RAM, you need to rebuild the code:

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-6.png" />
</div>

a. Choose your target and your USB port to upload the firmware:

<div align="center">
  <Image src="/assets/images/tutorials/esp/esp-1-7.png" />
</div>

b. Be sure that it is the right project selected to be uploaded in your board.

c. Click on **run application**.

:::warning
You may need to press the reset button just before flashing your board.
:::

You have successfully uploaded your first button service to an ESP Board! Ok, great, but what's the next step?

A button service is not really interesting by itself. On the second part, we will see how to detect it on a Luos network in order to be controlled.
